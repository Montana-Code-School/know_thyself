(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(t,e,n){t.exports=n(302)},115:function(t,e,n){},202:function(t,e,n){},234:function(t,e,n){},302:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(17),i=n.n(r),c=(n(115),n(19)),l=n(20),u=n(22),s=n(21),h=n(23),d=n(304),m=n(307),p=n(306),f=n(98),v=n(99),g=n(41),b=n.n(g),y=n(107),k=n.n(y),E=n(58),O=n(100),j=n.n(O),w=n(102),C=n.n(w),S=n(105),T=n.n(S),L=n(103),x=n.n(L),D=n(104),M=n.n(D);var I=Object(E.withStyles)({root:{flexGrow:1},menuButton:{marginLeft:-18,marginRight:10}})(function(t){var e=t.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(j.a,{position:"static"},o.a.createElement(C.a,{variant:"dense"},o.a.createElement(x.a,{className:e.menuButton,color:"inherit","aria-label":"Menu"},o.a.createElement(M.a,null)),o.a.createElement(T.a,{variant:"h6",color:"inherit"},"Know Thyself"))))}),N=(n(202),n(59)),A=n.n(N);var P=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(s.a)(e).call(this,t))).state={format:"C",location:"",weather:"",temp:0},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;A.a.get("https://ipapi.co/json/").then(function(e){var n,a=e.data.city+", "+e.data.country;(n=a,A.a.get("https://api.openweathermap.org/data/2.5/weather?q="+n+"&units=metric&APPID=e8656d00ae56fd09428db5cae581be02")).then(function(e){t.setState({location:a,weather:e.data.weather[0],temp:e.data.main.temp})})}).catch(t.setState({location:"Cannot get location.",temp:null}))}},{key:"render",value:function(){(new Date).getHours();return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"location"},o.a.createElement("p",null,this.state.location," - ",this.state.weather.main," - ",(1.8*this.state.temp+32).toFixed(0)," \xb0")))}}]),e}(o.a.Component),B=(o.a.Component,n(106)),G=n.n(B),R=(n(234),function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(G.a,{className:"time",format:"dddd, MMMM Do YYYY, h:mm a",ticking:!0,timezone:"US/Mountain"}))}}]),e}(a.Component)),_=n(108),F=n.n(_),J={paper:{height:"100%",display:"flex",justifyContent:"center"},textfield:{height:"100%",width:"75%"}},U=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;fetch("http://localhost:4001/api/prompts").then(function(t){return t.json()}).then(function(e){return t.props.onDataLoad(e)})}},{key:"shouldComponentUpdate",value:function(t){return!this.props.data.length}},{key:"getRandomPrompt",value:function(){var t=this.props.data;return t.length?t[Math.floor(Math.random()*t.length)].body:"loading"}},{key:"render",value:function(){var t=this;return o.a.createElement("div",null,o.a.createElement(I,{position:"sticky"}),o.a.createElement(R,null),o.a.createElement(P,null),o.a.createElement("h3",null,this.getRandomPrompt()),o.a.createElement(b.a,{style:J.paper},o.a.createElement(k.a,{onChange:function(e){return t.props.entryContent(e)},id:"filled-full-width",multiline:!0,rowsMax:30,style:J.textfield,placeholder:"Put your words in me...",fullWidth:!0,margin:"normal",variant:"standard",InputLabelProps:{shrink:!0}})),o.a.createElement(F.a,{onClick:function(e){return t.props.submitEntry(e)},disabled:!1,color:"primary"},"Submit"))}}]),e}(a.Component),Y=n(305),W=function(){var t={token:"",user:null,isAuthenticated:!1,tokenBlob:!0};return{saveToken:function(e){localStorage.setItem("token",e),t.isAuthenticated=!0,t.token=e},saveUser:function(e){t.user=e},getUser:function(){return t.user},getToken:function(){return t.token?t.token:localStorage.getItem("token")}}}(),q=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(u.a)(this,Object(s.a)(e).call(this))).logout=function(){t.setState({isAuthenticated:!1,token:"",user:null})},t.onFailure=function(t){alert(t)},t.googleResponse=function(e){var n=new Blob([JSON.stringify({access_token:e.accessToken},null,2)],{type:"application/json"});fetch("http://localhost:4001/api/v1/auth/google",{method:"POST",body:n,mode:"cors",cache:"default"}).then(function(e){var n=e.headers.get("x-auth-token");e.json().then(function(e){n&&(t.setState({isAuthenticated:!0,user:e,token:n}),W.saveToken(n))})})},t.state={checkingToken:!0,isAuthenticated:!1,user:null,token:""},t}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.state.isAuthenticated?o.a.createElement(Y.a,{to:"/profile"}):o.a.createElement("div",null,o.a.createElement(f.GoogleLogin,{clientId:v.GOOGLE_CLIENT_ID,buttonText:"Login",onSuccess:this.googleResponse,onFailure:this.onFailure}));return o.a.createElement("div",{className:"App"},t)}}]),e}(a.Component),z=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(s.a)(e).call(this,t))).state={data:[],value:"",entry:""},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"onDataLoad",value:function(t){this.setState({data:t})}},{key:"handleChange",value:function(t){this.setState({value:t.target.value})}},{key:"handleSubmit",value:function(){if(W.getToken()){var t={body:this.state.value};fetch("http://localhost:4001/verify/entry",{method:"POST",headers:{"Content-type":"application/json",Authorization:"bearer ".concat(W.getToken())},body:JSON.stringify(t)}).then(function(t){return t.json()}).then(function(t){return console.log(t)})}}},{key:"render",value:function(){var t=this;return o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement(p.a,{exact:!0,path:"/",component:q}),o.a.createElement(p.a,{path:"/profile",render:function(){return o.a.createElement(U,{onDataLoad:t.onDataLoad.bind(t),submitEntry:t.handleSubmit.bind(t),data:t.state.data,entryContent:t.handleChange.bind(t)})}}),o.a.createElement(p.a,{component:Error})))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},99:function(t){t.exports={GOOGLE_CLIENT_ID:"406167655077-v2aoo8el9d2952ec45etq99ch1f8dcpg.apps.googleusercontent.com"}}},[[110,2,1]]]);
//# sourceMappingURL=main.4c46e25e.chunk.js.map